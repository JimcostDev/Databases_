Create database Facturacion;
use Facturacion;

CREATE TABLE PAIS(
PAI_CODIGO CHAR (3) NOT NULL,
PAI_NOMBRE CHAR (30) NOT NULL,
CONSTRAINT PK_PAISID PRIMARY KEY (PAI_CODIGO)
)

CREATE TABLE DEPARTAMENTO(
DEP_CODIGO CHAR (6) NOT NULL,
DEP_NOMBRE CHAR (40) NOT NULL,
PAI_CODIGO CHAR(3) NOT NULL,
CONSTRAINT PK_DEPID PRIMARY KEY (DEP_CODIGO),
CONSTRAINT FK_PAIS FOREIGN KEY (PAI_CODIGO) REFERENCES PAIS(PAI_CODIGO)
)

CREATE TABLE CIUDAD(
CIU_CODIGO CHAR (6) NOT NULL,
CIU_NOMBRE CHAR (40) NOT NULL,
DEP_CODIGO CHAR (6) NOT NULL,
CONSTRAINT PK_CUIDADID PRIMARY KEY (CIU_CODIGO),
CONSTRAINT FK_DEPARTAMENTO FOREIGN KEY (DEP_CODIGO) REFERENCES DEPARTAMENTO(DEP_CODIGO)
)

CREATE TABLE BARRIO(
BAR_CODIGO CHAR (12) NOT NULL ,
BAR_NOMBRE CHAR (40) NOT NULL ,
CIU_CODIGO CHAR (6) NOT NULL ,
CONSTRAINT PK_BARRIOID PRIMARY KEY (BAR_CODIGO),
CONSTRAINT FK_CIUDAD FOREIGN KEY (CIU_CODIGO) REFERENCES CIUDAD(CIU_CODIGO)
)

CREATE TABLE TIPOIDENTIFICACION(
TIP_CODIGO CHAR (3) NOT NULL ,
TIP_NOMBRE CHAR(20) NOT NULL , 
CONSTRAINT PK_TIPOID PRIMARY KEY (TIP_CODIGO)
)

CREATE TABLE CLIENTE(
CLI_CODIGO CHAR (10) NOT NULL ,
CLI_IDENTIFICACION CHAR (20) NOT NULL,
CLI_NOMBRE CHAR (30) NOT NULL,
CLI_APELLIDO CHAR (30) NOT NULL,
CLI_DIRECCION VARCHAR (120) NOT NULL,
CLI_TELEFONO VARCHAR (20) NOT NULL,
CLI_CELULAR VARCHAR (20) NULL,
CLI_EMAIL VARCHAR (120) NULL,
CLI_SEXO CHAR (1) NOT NULL,
BAR_CODIGO CHAR (12) NOT NULL,
TIP_CODIGO CHAR (3) NOT NULL ,
CONSTRAINT PK_CLIENTEID PRIMARY KEY (CLI_CODIGO),
CONSTRAINT FK_BARRIOID FOREIGN KEY (BAR_CODIGO) REFERENCES BARRIO(BAR_CODIGO),
CONSTRAINT FK_TIPO FOREIGN KEY (TIP_CODIGO) REFERENCES TIPOIDENTIFICACION(TIP_CODIGO)
)

CREATE TABLE MARCA(
MAR_CODIGO CHAR (3) NOT NULL ,
MAR_DESCRIPCION VARCHAR(30) NOT NULL , 
CONSTRAINT PK_TID PRIMARY KEY (MAR_CODIGO)
)

CREATE TABLE PRODUCTO(
PRO_CODIGO CHAR (10) NOT NULL ,
PRO_NOMBRE CHAR(40) NOT NULL ,
PRO_PRECIO DECIMAL (18,2) NOT NULL,
MAR_CODIGO CHAR (3) NOT NULL,
CONSTRAINT PK_PRODUCTO PRIMARY KEY (PRO_CODIGO),
CONSTRAINT FK_MARCA FOREIGN KEY (MAR_CODIGO) REFERENCES MARCA(MAR_CODIGO)
)


CREATE TABLE VENDEDOR(
VEN_CODIGO CHAR (10) NOT NULL ,
VEN_IDENTIFICACION CHAR (20) NOT NULL,
VEN_NOMBRE CHAR(40) NOT NULL ,
VEN_APELLIDO CHAR (30) NOT NULL,
VEN_DIRECCION VARCHAR(120) NOT NULL,
VEN_TELEFONO VARCHAR (20) NOT NULL,
VEN_CELULAR VARCHAR(20) NOT NULL,
VEN_EMAIL VARCHAR (120) NOT NULL,
VEN_SEXO CHAR (1) NOT NULL,
BAR_CODIGO CHAR (12) NOT NULL, 
TIP_CODIGO CHAR (3) NOT NULL ,
CONSTRAINT PK_VENDEDOR PRIMARY KEY (VEN_CODIGO),
CONSTRAINT FK_TIPOVEN FOREIGN KEY (TIP_CODIGO) REFERENCES TIPOIDENTIFICACION(TIP_CODIGO),
CONSTRAINT FK_BARRIOVEN FOREIGN KEY (BAR_CODIGO) REFERENCES BARRIO(BAR_CODIGO)
)


CREATE TABLE FORMADEPAGO(
FOR_CODIGO CHAR (3) NOT NULL ,
FOR_NOMBRE CHAR(30) NOT NULL , 
CONSTRAINT PK_FDP PRIMARY KEY (FOR_CODIGO)
)


CREATE TABLE FACTURAENCABEZADO(
FAC_NUMERO CHAR (10) NOT NULL ,
FAC_FECHA DATETIME NOT NULL ,
VEN_CODIGO CHAR (10) NOT NULL,
CLI_CODIGO CHAR (10) NOT NULL,
FAC_SUBTOTAL DECIMAL (18,2) NOT NULL,
FAC_DESCUENTO DECIMAL (18,2) NOT NULL,
FAC_IMPUESTO DECIMAL (18,2) NOT NULL,
FAC_TOTAL DECIMAL (18,2) NOT NULL,
FOR_CODIGO CHAR (3) NOT NULL, 
CONSTRAINT PK_FACENCABEZADO PRIMARY KEY (FAC_NUMERO),
CONSTRAINT FK_VEN FOREIGN KEY (VEN_CODIGO) REFERENCES VENDEDOR(VEN_CODIGO),
CONSTRAINT FK_CLI FOREIGN KEY (CLI_CODIGO) REFERENCES CLIENTE(CLI_CODIGO),
CONSTRAINT FK_COD FOREIGN KEY (FOR_CODIGO) REFERENCES FORMADEPAGO(FOR_CODIGO)
)

CREATE TABLE FACTURADETALLE(
FAC_NUMERO CHAR (10) NOT NULL ,
PRO_CODIGO CHAR(10) NOT NULL ,
FAC_CANTIDAD INT NOT NULL,
FAC_PRECIO DECIMAL (18,2) NOT NULL,
FAC_SUBTOTAL DECIMAL (18,2) NOT NULL,
FAC_DESCUENTO DECIMAL (18,2) NOT NULL,
FAC_IMPUESTO DECIMAL (18,2) NOT NULL,
FAC_TOTAL DECIMAL (18,2) NOT NULL,
CONSTRAINT FK_PROD FOREIGN KEY (PRO_CODIGO) REFERENCES PRODUCTO(PRO_CODIGO),
CONSTRAINT FK_FACK FOREIGN KEY (FAC_NUMERO) REFERENCES FACTURAENCABEZADO(FAC_NUMERO),  
CONSTRAINT PK_FACDET PRIMARY KEY (FAC_NUMERO, PRO_CODIGO)
)

